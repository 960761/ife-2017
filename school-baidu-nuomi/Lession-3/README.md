# [动态数据绑定（二）](http://ife.baidu.com/course/detail/id/20)

[梁少峰](http://ife.baidu.com/mentor/detail/id/26) | [斌斌学院](http://ife.baidu.com/college/detail/id/10)

时间  平均用时0.0天

### 课程概述

作业提交截止时间：04-24

## 重要说明

百度前端技术学院的课程任务是由百度前端工程师专为对前端不同掌握程度的同学设计。我们尽力保证课程内容的质量以及学习难度的合理性，但即使如此，真正决定课程效果的，还是你的每一次思考和实践。<br />
课程多数题目的解决方案都不是唯一的，这和我们在实际工作中的情况也是一致的。因此，我们的要求不仅仅是实现设计稿的效果，更是要多去思考不同的解决方案，评估不同方案的优劣，然后使用在该场景下最优雅的方式去实现。那些最终没有被我们采纳的方案，同样也可以帮助我们学到很多知识。所以，我们列出的参考资料未必是实现需求所必须的。有的时候，实现题目的要求很简单，甚至参考资料里就有，但是背后的思考和亲手去实践却是任务最关键的一部分。在学习这些资料时，要多思考，多提问，多质疑。相信通过和小伙伴们的交流，能让你的学习事半功倍。

## 任务目的

1. 在实践中使用递归思想
2. 了解设计模式中的“发布-订阅模式”

## 任务描述

这是“动态数据绑定”系列的第二题。在第一题的基础上，我们继续考虑以下难点：<br />

1. 如果传入参数对象是一个“比较深”的对象（也就是其属性值也可能是对象），那该怎么办呢？举个例子。

```javascript
// 一个“比较深”的对象：某些属性的值也是一个对象
let obj = {
 a: 1,
 b: 2,
 c: {
     d: 3,
     e: 4
 }
}
```

2. 如果设置新的值是一个对象的话，新设置的对象的属性是否能能继续响应 getter 和 setter。举个例子。

```javascript
 let app1 = new Observer({
         name: 'youngwind',
         age: 25
 });

 app1.data.name = {
         lastName: 'liang',
         firstName: 'shaofeng'
 };

 app1.data.name.lastName;
 // 这里还需要输出 '你访问了 lastName '
 app1.data.name.firstName = 'lalala';
 // 这里还需要输出 '你设置了firstName, 新的值为 lalala'
```

3. 考虑传递回调函数。在实际应用中，当特定数据发生改变的时候，我们是希望做一些特定的事情的，而不是每一次都只能打印出一些信息。所以，我们需要支持传入回调函数的功能。举个例子。

```javascript
 let app1 = new Observer({
         name: 'youngwind',
         age: 25
 });

 // 你需要实现 $watch 这个 API
 app1.$watch('age', function(age) {
         console.log(`我的年纪变了，现在已经是：${age}岁了`)
 });

 app1.data.age = 100; // 输出：'我的年纪变了，现在已经是100岁了'
```

## 任务注意事项

1. 不能使用任何第三方的库
2. 程序执行环境为浏览器

## 在线学习参考资料

1. [发布-订阅模式](https://gold.xitu.io/entry/580b5553570c350068e6c2d6)
2. 更多设计模式相关的资料强烈推荐曾探所著[《JavaScript设计模式与开发实践》](https://book.douban.com/subject/26382780/)